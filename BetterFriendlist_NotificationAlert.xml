<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/">

	<!-- Notification Toast Container - Anchor point for up to 3 toasts, moveable in Edit Mode -->
	<Frame name="BFL_NotificationToastContainer" parent="UIParent" frameStrata="MEDIUM" frameLevel="50" enableMouse="false">
		<Size x="300" y="200"/> <!-- Height for 3 toasts -->
		<Anchors>
			<Anchor point="TOP" x="0" y="-150"/>
		</Anchors>
		<KeyValues>
			<KeyValue key="editModeName" value="BetterFriendlist Notifications" type="string"/>
		</KeyValues>
	</Frame>

	<!-- Friend Notification Toast Template - Used to create 3 instances -->
	<Frame name="BFL_FriendNotificationToastTemplate" inherits="BackdropTemplate" parent="BFL_NotificationToastContainer" hidden="true" frameStrata="DIALOG" frameLevel="100" enableMouse="true" virtual="true">
		<Size x="300" y="64"/>
		<Anchors>
			<Anchor point="TOP" x="0" y="0"/>
		</Anchors>
		
		<Scripts>
			<OnLoad>
				self:SetBackdrop({
					bgFile = "Interface\\FrameGeneral\\UI-Background-Rock",
					edgeFile = "Interface\\DialogFrame\\UI-DialogBox-Border",
					tile = true,
					tileSize = 256,
					edgeSize = 20,
					insets = { left = 4, right = 4, top = 4, bottom = 4 }
				})
				self:SetBackdropColor(0.4, 0.4, 0.4, 1)
				self:SetBackdropBorderColor(1, 1, 1, 1)
			</OnLoad>
			<OnMouseUp>
				-- Don't hide toasts when in Edit Mode (they are previews)
				if EditModeManagerFrame and EditModeManagerFrame:IsEditModeActive() then
					return
				end
				
				if self.FadeOut:IsPlaying() then
					self.FadeOut:Stop()
				end
				self:Hide()
			</OnMouseUp>
			<OnEnter>
				if self.FadeOut:IsPlaying() then
					self.FadeOut:Stop()
					self:SetAlpha(1)
				end
			</OnEnter>
			<OnLeave>
				if not self.FadeOut:IsPlaying() then
					self.FadeOut:Play()
				end
			</OnLeave>
		</Scripts>
		
		<Layers>
			<!-- Icon - Feather user-check -->
			<Layer level="ARTWORK">
				<Texture parentKey="Icon" file="Interface\AddOns\BetterFriendlist\Icons\user-check">
					<Size x="32" y="32"/>
					<Anchors>
						<Anchor point="LEFT" x="12" y="0"/>
					</Anchors>
					<Color r="0.3" g="1" b="0.3" a="1"/>
				</Texture>
			</Layer>
			
			<!-- Text - compact layout -->
			<Layer level="OVERLAY">
				<FontString parentKey="Name" inherits="GameFontNormal" justifyH="LEFT">
					<Size x="238" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="52" y="-12"/>
					</Anchors>
					<Color r="1" g="0.82" b="0" a="1"/>
				</FontString>
				
				<FontString parentKey="Message" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="238" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.Name" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
					</Anchors>
					<Color r="0.9" g="0.9" b="0.9" a="1"/>
				</FontString>
			</Layer>
		</Layers>
		
		<!-- Smooth animations -->
		<Animations>
			<AnimationGroup parentKey="FadeIn">
				<Alpha order="1" duration="0.2" fromAlpha="0" toAlpha="1" smoothing="OUT"/>
				<Translation order="1" duration="0.2" offsetY="-10" smoothing="OUT"/>
			</AnimationGroup>
			
			<AnimationGroup parentKey="FadeOut">
				<Alpha order="1" duration="0.5" fromAlpha="1" toAlpha="0" smoothing="IN" startDelay="4.0"/>
			</AnimationGroup>
		</Animations>
	</Frame>

	<!-- Create 3 Toast instances -->
	<Frame name="BFL_FriendNotificationToast1" inherits="BFL_FriendNotificationToastTemplate" parent="BFL_NotificationToastContainer" parentKey="Toast1" id="1">
		<Anchors>
			<Anchor point="TOP" relativeKey="$parent" relativePoint="TOP" x="0" y="0"/>
		</Anchors>
	</Frame>
	<Frame name="BFL_FriendNotificationToast2" inherits="BFL_FriendNotificationToastTemplate" parent="BFL_NotificationToastContainer" parentKey="Toast2" id="2">
		<Anchors>
			<Anchor point="TOP" relativeKey="$parent.Toast1" relativePoint="BOTTOM" x="0" y="-4"/>
		</Anchors>
	</Frame>
	<Frame name="BFL_FriendNotificationToast3" inherits="BFL_FriendNotificationToastTemplate" parent="BFL_NotificationToastContainer" parentKey="Toast3" id="3">
		<Anchors>
			<Anchor point="TOP" relativeKey="$parent.Toast2" relativePoint="BOTTOM" x="0" y="-4"/>
		</Anchors>
	</Frame>
</Ui>